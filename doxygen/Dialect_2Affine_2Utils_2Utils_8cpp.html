<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MLIR: lib/Dialect/Affine/Utils/Utils.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MLIR
   &#160;<span id="projectnumber">14.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1a25ec519b6c1121408b67cc33ce3f15.html">Dialect</a></li><li class="navelem"><a class="el" href="dir_30022079959872f4a1874dfcab7bb1fc.html">Affine</a></li><li class="navelem"><a class="el" href="dir_36ccfdf0d236a67fd57e73c4a5bad479.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Utils.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="Dialect_2Affine_2Utils_8h_source.html">mlir/Dialect/Affine/Utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Analysis_2Utils_8h_source.html">mlir/Analysis/Utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AffineOps_8h_source.html">mlir/Dialect/Affine/IR/AffineOps.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AffineValueMap_8h_source.html">mlir/Dialect/Affine/IR/AffineValueMap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MemRef_8h_source.html">mlir/Dialect/MemRef/IR/MemRef.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="BlockAndValueMapping_8h_source.html">mlir/IR/BlockAndValueMapping.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Dominance_8h_source.html">mlir/IR/Dominance.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="IR_2IntegerSet_8h_source.html">mlir/IR/IntegerSet.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="GreedyPatternRewriteDriver_8h_source.html">mlir/Transforms/GreedyPatternRewriteDriver.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="LoopUtils_8h_source.html">mlir/Transforms/LoopUtils.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for Utils.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="Dialect_2Affine_2Utils_2Utils_8cpp__incl.png" border="0" usemap="#lib_2Dialect_2Affine_2Utils_2Utils_8cpp" alt=""/></div>
<map name="lib_2Dialect_2Affine_2Utils_2Utils_8cpp" id="lib_2Dialect_2Affine_2Utils_2Utils_8cpp">
<area shape="rect" id="node2" href="Dialect_2Affine_2Utils_8h.html" title="mlir/Dialect/Affine\l/Utils.h" alt="" coords="643,95,783,136"/>
<area shape="rect" id="node20" href="Analysis_2Utils_8h.html" title="mlir/Analysis/Utils.h" alt="" coords="557,370,710,397"/>
<area shape="rect" id="node31" href="AffineOps_8h.html" title="mlir/Dialect/Affine\l/IR/AffineOps.h" alt="" coords="1219,184,1359,225"/>
<area shape="rect" id="node36" href="AffineValueMap_8h.html" title="mlir/Dialect/Affine\l/IR/AffineValueMap.h" alt="" coords="697,452,853,493"/>
<area shape="rect" id="node37" href="MemRef_8h.html" title="mlir/Dialect/MemRef\l/IR/MemRef.h" alt="" coords="1932,273,2087,315"/>
<area shape="rect" id="node43" href="BlockAndValueMapping_8h.html" title="mlir/IR/BlockAndValueMapping.h" alt="" coords="2645,102,2878,129"/>
<area shape="rect" id="node44" href="Dominance_8h.html" title="mlir/IR/Dominance.h" alt="" coords="1472,102,1627,129"/>
<area shape="rect" id="node47" href="IR_2IntegerSet_8h.html" title="mlir/IR/IntegerSet.h" alt="" coords="401,549,549,575"/>
<area shape="rect" id="node48" href="GreedyPatternRewriteDriver_8h.html" title="mlir/Transforms/GreedyPattern\lRewriteDriver.h" alt="" coords="2161,95,2383,136"/>
<area shape="rect" id="node50" href="LoopUtils_8h.html" title="mlir/Transforms/LoopUtils.h" alt="" coords="2761,370,2962,397"/>
<area shape="rect" id="node3" href="AffineAnalysis_8h.html" title="mlir/Analysis/AffineAnalysis.h" alt="" coords="587,191,803,218"/>
<area shape="rect" id="node4" href="Ops_8h.html" title="mlir/Dialect/StandardOps\l/IR/Ops.h" alt="" coords="1091,273,1277,315"/>
<area shape="rect" id="node9" href="Value_8h.html" title="mlir/IR/Value.h" alt="" coords="297,877,415,903"/>
<area shape="rect" id="node5" href="Arithmetic_8h.html" title="mlir/Dialect/Arithmetic\l/IR/Arithmetic.h" alt="" coords="1751,363,1921,404"/>
<area shape="rect" id="node6" href="IR_2Dialect_8h.html" title="mlir/IR/Dialect.h" alt="" coords="1509,638,1635,665"/>
<area shape="rect" id="node14" href="CastInterfaces_8h.html" title="mlir/Interfaces/CastInterfaces.h" alt="" coords="1384,459,1611,486"/>
<area shape="rect" id="node15" href="SideEffectInterfaces_8h.html" title="mlir/Interfaces/SideEffect\lInterfaces.h" alt="" coords="1685,452,1872,493"/>
<area shape="rect" id="node16" href="CallInterfaces_8h.html" title="mlir/Interfaces/CallInterfaces.h" alt="" coords="1454,370,1677,397"/>
<area shape="rect" id="node17" href="ControlFlowInterfaces_8h.html" title="mlir/Interfaces/ControlFlow\lInterfaces.h" alt="" coords="1231,363,1430,404"/>
<area shape="rect" id="node13" href="OpDefinition_8h.html" title="mlir/IR/OpDefinition.h" alt="" coords="1491,549,1653,575"/>
<area shape="rect" id="node7" href="OperationSupport_8h.html" title="mlir/IR/OperationSupport.h" alt="" coords="807,720,1001,747"/>
<area shape="rect" id="node8" href="BlockSupport_8h.html" title="mlir/IR/BlockSupport.h" alt="" coords="883,795,1050,821"/>
<area shape="rect" id="node11" href="Location_8h.html" title="mlir/IR/Location.h" alt="" coords="571,795,707,821"/>
<area shape="rect" id="node10" href="Support_2LLVM_8h.html" title="mlir/Support/LLVM.h" alt="" coords="694,959,845,985"/>
<area shape="rect" id="node21" href="AffineStructures_8h.html" title="mlir/Analysis/AffineStructures.h" alt="" coords="344,459,571,486"/>
<area shape="rect" id="node28" href="IR_2AffineMap_8h.html" title="mlir/IR/AffineMap.h" alt="" coords="811,549,957,575"/>
<area shape="rect" id="node30" href="Block_8h.html" title="mlir/IR/Block.h" alt="" coords="2629,459,2747,486"/>
<area shape="rect" id="node22" href="IntegerPolyhedron_8h.html" title="mlir/Analysis/Presburger\l/IntegerPolyhedron.h" alt="" coords="144,541,325,583"/>
<area shape="rect" id="node23" href="Matrix_8h.html" title="mlir/Analysis/Presburger\l/Matrix.h" alt="" coords="95,631,276,672"/>
<area shape="rect" id="node25" href="IR_2AffineExpr_8h.html" title="mlir/IR/AffineExpr.h" alt="" coords="488,638,635,665"/>
<area shape="rect" id="node27" href="LogicalResult_8h.html" title="mlir/Support/LogicalResult.h" alt="" coords="2315,549,2519,575"/>
<area shape="rect" id="node32" href="AffineMemoryOpInterfaces_8h.html" title="mlir/Dialect/Affine\l/IR/AffineMemoryOpInterfaces.h" alt="" coords="1029,452,1259,493"/>
<area shape="rect" id="node33" href="LoopLikeInterface_8h.html" title="mlir/Interfaces/LoopLike\lInterface.h" alt="" coords="1704,273,1883,315"/>
<area shape="rect" id="node38" href="ReshapeOpsUtils_8h.html" title="mlir/Dialect/Utils\l/ReshapeOpsUtils.h" alt="" coords="2913,869,3061,911"/>
<area shape="rect" id="node39" href="CopyOpInterface_8h.html" title="mlir/Interfaces/CopyOpInterface.h" alt="" coords="1947,459,2189,486"/>
<area shape="rect" id="node40" href="ViewLikeInterface_8h.html" title="mlir/Interfaces/ViewLike\lInterface.h" alt="" coords="2149,363,2329,404"/>
<area shape="rect" id="node45" href="RegionGraphTraits_8h.html" title="mlir/IR/RegionGraphTraits.h" alt="" coords="1689,191,1887,218"/>
<area shape="rect" id="node49" href="FrozenRewritePatternSet_8h.html" title="mlir/Rewrite/FrozenRewrite\lPatternSet.h" alt="" coords="2174,184,2370,225"/>
</map>
</div>
</div>
<p><a href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a91ed5c48cf2d60834e274223a2fe3391"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classvoid.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp.html#a91ed5c48cf2d60834e274223a2fe3391">promoteIfBlock</a> (AffineIfOp ifOp, bool elseBlock)</td></tr>
<tr class="memdesc:a91ed5c48cf2d60834e274223a2fe3391"><td class="mdescLeft">&#160;</td><td class="mdescRight">Promotes the <code>then</code> or the <code>else</code> block of <code>ifOp</code> (depending on whether <code>elseBlock</code> is false or true) into <code>ifOp</code>'s containing block, and discards the rest of the op.  <a href="#a91ed5c48cf2d60834e274223a2fe3391">More...</a><br /></td></tr>
<tr class="separator:a91ed5c48cf2d60834e274223a2fe3391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0c58877969ba751da8da214b1866e2e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp.html#ac0c58877969ba751da8da214b1866e2e">getOutermostInvariantForOp</a> (AffineIfOp ifOp)</td></tr>
<tr class="memdesc:ac0c58877969ba751da8da214b1866e2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the outermost affine.for/parallel op that the <code>ifOp</code> is invariant on.  <a href="#ac0c58877969ba751da8da214b1866e2e">More...</a><br /></td></tr>
<tr class="separator:ac0c58877969ba751da8da214b1866e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3327936fe7d848e7ec99d8efaebf3794"><td class="memItemLeft" align="right" valign="top">static AffineIfOp&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp.html#a3327936fe7d848e7ec99d8efaebf3794">hoistAffineIfOp</a> (AffineIfOp ifOp, <a class="el" href="classmlir_1_1Operation.html">Operation</a> *hoistOverOp)</td></tr>
<tr class="memdesc:a3327936fe7d848e7ec99d8efaebf3794"><td class="mdescLeft">&#160;</td><td class="mdescRight">A helper for the mechanics of <a class="el" href="namespacemlir.html#a57bafa91f432ad40bb6246fbcbd555fe" title="Hoists out affine.if/else to as high as possible, i.e., past all invariant affine.fors/parallel&#39;s. ">mlir::hoistAffineIfOp</a>.  <a href="#a3327936fe7d848e7ec99d8efaebf3794">More...</a><br /></td></tr>
<tr class="separator:a3327936fe7d848e7ec99d8efaebf3794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b4179d402ef316fbb0be21b2f38c127"><td class="memTemplParams" colspan="2">template&lt;typename EffectType , typename T &gt; </td></tr>
<tr class="memitem:a2b4179d402ef316fbb0be21b2f38c127"><td class="memTemplItemLeft" align="right" valign="top">static bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp.html#a2b4179d402ef316fbb0be21b2f38c127">hasNoInterveningEffect</a> (<a class="el" href="classmlir_1_1Operation.html">Operation</a> *start, T memOp)</td></tr>
<tr class="memdesc:a2b4179d402ef316fbb0be21b2f38c127"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure that all operations that could be executed after <code>start</code> (noninclusive) and prior to <code>memOp</code> (e.g.  <a href="#a2b4179d402ef316fbb0be21b2f38c127">More...</a><br /></td></tr>
<tr class="separator:a2b4179d402ef316fbb0be21b2f38c127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e60919d99d557f35d9f6b2b1a05b38"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp.html#ae2e60919d99d557f35d9f6b2b1a05b38">forwardStoreToLoad</a> (<a class="el" href="classmlir_1_1AffineReadOpInterface.html">AffineReadOpInterface</a> loadOp, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt; &amp;loadOpsToErase, <a class="el" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;memrefsToErase, <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo)</td></tr>
<tr class="memdesc:ae2e60919d99d557f35d9f6b2b1a05b38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to eliminate loadOp by replacing it with a value stored into memory which the load is guaranteed to retrieve.  <a href="#ae2e60919d99d557f35d9f6b2b1a05b38">More...</a><br /></td></tr>
<tr class="separator:ae2e60919d99d557f35d9f6b2b1a05b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26497ef59e96949344ad5f762c83b2ff"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classvoid.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp.html#a26497ef59e96949344ad5f762c83b2ff">findUnusedStore</a> (<a class="el" href="classmlir_1_1AffineWriteOpInterface.html">AffineWriteOpInterface</a> writeA, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt; &amp;opsToErase, <a class="el" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;memrefsToErase, <a class="el" href="classmlir_1_1PostDominanceInfo.html">PostDominanceInfo</a> &amp;postDominanceInfo)</td></tr>
<tr class="separator:a26497ef59e96949344ad5f762c83b2ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a265ee9bd7371fa494b507000eba68114"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classvoid.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp.html#a265ee9bd7371fa494b507000eba68114">loadCSE</a> (<a class="el" href="classmlir_1_1AffineReadOpInterface.html">AffineReadOpInterface</a> loadA, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt; &amp;loadOpsToErase, <a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;domInfo)</td></tr>
<tr class="separator:a265ee9bd7371fa494b507000eba68114"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a26497ef59e96949344ad5f762c83b2ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26497ef59e96949344ad5f762c83b2ff">&#9670;&nbsp;</a></span>findUnusedStore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classvoid.html">void</a> findUnusedStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineWriteOpInterface.html">AffineWriteOpInterface</a>&#160;</td>
          <td class="paramname"><em>writeA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt; &amp;&#160;</td>
          <td class="paramname"><em>opsToErase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>memrefsToErase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1PostDominanceInfo.html">PostDominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>postDominanceInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00684">684</a> of file <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Utils.cpp</a>.</p>

<p class="reference">References <a class="el" href="classmlir_1_1AffineWriteOpInterface.html#a2fab3b6e91539f8e7c95428fd0352fce">mlir::AffineWriteOpInterface::getMemRef()</a>, <a class="el" href="Value_8h_source.html#l00214">mlir::Value::getUsers()</a>, and <a class="el" href="Dominance_8h_source.html#l00184">mlir::PostDominanceInfo::postDominates()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00810">mlir::affineScalarReplace()</a>.</p>

</div>
</div>
<a id="ae2e60919d99d557f35d9f6b2b1a05b38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e60919d99d557f35d9f6b2b1a05b38">&#9670;&nbsp;</a></span>forwardStoreToLoad()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structmlir_1_1LogicalResult.html">LogicalResult</a> forwardStoreToLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineReadOpInterface.html">AffineReadOpInterface</a>&#160;</td>
          <td class="paramname"><em>loadOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt; &amp;&#160;</td>
          <td class="paramname"><em>loadOpsToErase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl</a>&lt; <a class="el" href="classmlir_1_1Value.html">Value</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>memrefsToErase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempt to eliminate loadOp by replacing it with a value stored into memory which the load is guaranteed to retrieve. </p>
<p>This check involves three components: 1) The store and load must be on the same location 2) The store must dominate (and therefore must always occur prior to) the load 3) No other operations will overwrite the memory loaded between the given load and store. If such a value exists, the replaced <code>loadOp</code> will be added to <code>loadOpsToErase</code> and its memref will be added to <code>memrefsToErase</code>. </p>

<p class="definition">Definition at line <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00620">620</a> of file <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Utils.cpp</a>.</p>

<p class="reference">References <a class="el" href="Dominance_8h_source.html#l00137">mlir::DominanceInfo::dominates()</a>, <a class="el" href="LogicalResult_8h_source.html#l00062">mlir::failure()</a>, <a class="el" href="classmlir_1_1AffineReadOpInterface.html#a8244a4feee85f6bd09a2c68ea316572d">mlir::AffineReadOpInterface::getMemRef()</a>, <a class="el" href="Value_8h_source.html#l00119">mlir::Value::getType()</a>, <a class="el" href="Value_8h_source.html#l00214">mlir::Value::getUsers()</a>, <a class="el" href="classmlir_1_1AffineReadOpInterface.html#ab0b307ac79e93d7e8f37814e59c8ef23">mlir::AffineReadOpInterface::getValue()</a>, <a class="el" href="Value_8h_source.html#l00163">mlir::Value::replaceAllUsesWith()</a>, and <a class="el" href="LogicalResult_8h_source.html#l00056">mlir::success()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00810">mlir::affineScalarReplace()</a>.</p>

</div>
</div>
<a id="ac0c58877969ba751da8da214b1866e2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0c58877969ba751da8da214b1866e2e">&#9670;&nbsp;</a></span>getOutermostInvariantForOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classmlir_1_1Operation.html">Operation</a>* getOutermostInvariantForOp </td>
          <td>(</td>
          <td class="paramtype">AffineIfOp&#160;</td>
          <td class="paramname"><em>ifOp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the outermost affine.for/parallel op that the <code>ifOp</code> is invariant on. </p>
<p>The <code>ifOp</code> could be hoisted and placed right before such an operation. This method assumes that the ifOp has been canonicalized (to be correct and effective). </p>

<p class="definition">Definition at line <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00047">47</a> of file <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Utils.cpp</a>.</p>

<p class="reference">References <a class="el" href="Operation_8h_source.html#l00247">mlir::Operation::getOperands()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00196">mlir::hoistAffineIfOp()</a>.</p>

</div>
</div>
<a id="a2b4179d402ef316fbb0be21b2f38c127"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b4179d402ef316fbb0be21b2f38c127">&#9670;&nbsp;</a></span>hasNoInterveningEffect()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EffectType , typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool hasNoInterveningEffect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>memOp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure that all operations that could be executed after <code>start</code> (noninclusive) and prior to <code>memOp</code> (e.g. </p>
<p>on a control flow/op path between the operations) do not have the potential memory effect <code>EffectType</code> on <code>memOp</code>. <code>memOp</code> is an operation that reads or writes to a memref. For example, if <code>EffectType</code> is MemoryEffects::Write, this method will check if there is no write to the memory between <code>start</code> and <code>memOp</code> that would change the read within <code>memOp</code>. </p>

<p class="definition">Definition at line <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00445">445</a> of file <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Utils.cpp</a>.</p>

<p class="reference">References <a class="el" href="AffineAnalysis_8cpp_source.html#l00570">mlir::checkMemrefAccessDependence()</a>, <a class="el" href="Block_8h_source.html#l00136">mlir::Block::end()</a>, <a class="el" href="Operation_8h_source.html#l00096">mlir::Operation::getBlock()</a>, <a class="el" href="Value_8cpp_source.html#l00020">mlir::Value::getDefiningOp()</a>, <a class="el" href="Analysis_2Utils_8cpp_source.html#l01280">mlir::getNumCommonSurroundingLoops()</a>, <a class="el" href="Operation_8h_source.html#l00117">mlir::Operation::getParentOp()</a>, <a class="el" href="Operation_8h_source.html#l00113">mlir::Operation::getParentRegion()</a>, <a class="el" href="IR_2Region_8cpp_source.html#l00046">mlir::Region::getParentRegion()</a>, <a class="el" href="Block_8h_source.html#l00256">mlir::Block::getSuccessors()</a>, <a class="el" href="AffineAnalysis_8h_source.html#l00174">mlir::hasDependence()</a>, <a class="el" href="Operation_8h_source.html#l00145">mlir::Operation::isAncestor()</a>, <a class="el" href="IR_2Region_8h_source.html#l00216">mlir::Region::isAncestor()</a>, and <a class="el" href="AffineAnalysis_8h_source.html#l00079">mlir::MemRefAccess::memref</a>.</p>

</div>
</div>
<a id="a3327936fe7d848e7ec99d8efaebf3794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3327936fe7d848e7ec99d8efaebf3794">&#9670;&nbsp;</a></span>hoistAffineIfOp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AffineIfOp hoistAffineIfOp </td>
          <td>(</td>
          <td class="paramtype">AffineIfOp&#160;</td>
          <td class="paramname"><em>ifOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1Operation.html">Operation</a> *&#160;</td>
          <td class="paramname"><em>hoistOverOp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A helper for the mechanics of <a class="el" href="namespacemlir.html#a57bafa91f432ad40bb6246fbcbd555fe" title="Hoists out affine.if/else to as high as possible, i.e., past all invariant affine.fors/parallel&#39;s. ">mlir::hoistAffineIfOp</a>. </p>
<p>Hoists <code>ifOp</code> just over <code>hoistOverOp</code>. Returns the new hoisted op if any hoisting happened, otherwise the same <code>ifOp</code>. </p>

<p class="definition">Definition at line <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00073">73</a> of file <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Utils.cpp</a>.</p>

<p class="reference">References <a class="el" href="Visitors_8h_source.html#l00051">mlir::WalkResult::advance()</a>, <a class="el" href="BlockAndValueMapping_8h_source.html#l00073">mlir::BlockAndValueMapping::clear()</a>, <a class="el" href="Builders_8cpp_source.html#l00463">mlir::OpBuilder::clone()</a>, <a class="el" href="Builders_8h_source.html#l00424">mlir::OpBuilder::create()</a>, <a class="el" href="Operation_8h_source.html#l00096">mlir::Operation::getBlock()</a>, <a class="el" href="Builders_8cpp_source.html#l00091">mlir::Builder::getBoolAttr()</a>, <a class="el" href="Block_8h_source.html#l00129">mlir::Block::getOperations()</a>, <a class="el" href="Builders_8cpp_source.html#l00205">mlir::Builder::getStringAttr()</a>, <a class="el" href="Visitors_8h_source.html#l00050">mlir::WalkResult::interrupt()</a>, <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00031">promoteIfBlock()</a>, and <a class="el" href="Builders_8h_source.html#l00345">mlir::OpBuilder::setInsertionPointAfter()</a>.</p>

</div>
</div>
<a id="a265ee9bd7371fa494b507000eba68114"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a265ee9bd7371fa494b507000eba68114">&#9670;&nbsp;</a></span>loadCSE()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classvoid.html">void</a> loadCSE </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmlir_1_1AffineReadOpInterface.html">AffineReadOpInterface</a>&#160;</td>
          <td class="paramname"><em>loadA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; <a class="el" href="classmlir_1_1Operation.html">Operation</a> *&gt; &amp;&#160;</td>
          <td class="paramname"><em>loadOpsToErase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmlir_1_1DominanceInfo.html">DominanceInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>domInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00730">730</a> of file <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Utils.cpp</a>.</p>

<p class="reference">References <a class="el" href="Dominance_8h_source.html#l00137">mlir::DominanceInfo::dominates()</a>, <a class="el" href="classmlir_1_1AffineReadOpInterface.html#a8244a4feee85f6bd09a2c68ea316572d">mlir::AffineReadOpInterface::getMemRef()</a>, <a class="el" href="OpDefinition_8h_source.html#l00106">mlir::OpState::getOperation()</a>, <a class="el" href="Value_8h_source.html#l00119">mlir::Value::getType()</a>, <a class="el" href="Value_8h_source.html#l00214">mlir::Value::getUsers()</a>, <a class="el" href="classmlir_1_1AffineReadOpInterface.html#ab0b307ac79e93d7e8f37814e59c8ef23">mlir::AffineReadOpInterface::getValue()</a>, and <a class="el" href="Value_8h_source.html#l00163">mlir::Value::replaceAllUsesWith()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00810">mlir::affineScalarReplace()</a>.</p>

</div>
</div>
<a id="a91ed5c48cf2d60834e274223a2fe3391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91ed5c48cf2d60834e274223a2fe3391">&#9670;&nbsp;</a></span>promoteIfBlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classvoid.html">void</a> promoteIfBlock </td>
          <td>(</td>
          <td class="paramtype">AffineIfOp&#160;</td>
          <td class="paramname"><em>ifOp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>elseBlock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Promotes the <code>then</code> or the <code>else</code> block of <code>ifOp</code> (depending on whether <code>elseBlock</code> is false or true) into <code>ifOp</code>'s containing block, and discards the rest of the op. </p>

<p class="definition">Definition at line <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00031">31</a> of file <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html">Utils.cpp</a>.</p>

<p class="reference">References <a class="el" href="Block_8h_source.html#l00135">mlir::Block::begin()</a>, <a class="el" href="Block_8h_source.html#l00136">mlir::Block::end()</a>, and <a class="el" href="Block_8h_source.html#l00129">mlir::Block::getOperations()</a>.</p>

<p class="reference">Referenced by <a class="el" href="Dialect_2Affine_2Utils_2Utils_8cpp_source.html#l00073">hoistAffineIfOp()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 29 2021 16:37:14 for MLIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
